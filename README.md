# Aembit Credentials (GitHub Action)

## Overview
This action retrieves temporary credentials from Aembit for use in your GitHub workflows. It enables secure, secretless access to external systems like cloud providers or APIs by dynamically fetching scoped credentials at runtime. This helps improves security within CI/CD pipelines.

**Note: this is an alpha release, it is not yet officially supported.**

## Usage

```yaml
- uses: Aembit/get-credentials@v1
  id: step-id # This is required as output of this step is passed to the next step(s).
  with:
    # Aembit Edge SDK Client ID. 
    # The unique identifier for your GitHub Trust Provider in Aembit. 
    # You can find it by logging into your Aembit tenant, navigating to Trust Providers, selecting your GitHub Trust Provider, and copying the Edge SDK Client ID. 
    # This is a required field.
    client-id: ''
    
    # Specifies the type of credential to retrieve from Aembit.
    # Valid values are: ApiKey, UsernamePassword, OAuthToken, GoogleWorkloadIdentityFederation, AwsStsFederation
    # This is a required field.
    credential-type: ''

    # Server Workload - Service Endpoint Host
    # Used to access server workload which in turn is used to access credentials. 
    # You can find it by logging into your Aembit tenant, navigating to Server Workloads, selecting your desired Server Workload, and copying the Service Endpoint Host.
    server-host: ''
    
    # Server Workload - Service Endpoint Port
    # Used to access server workload which in turn is used to access credentials. 
    # You can find it by logging into your Aembit tenant, navigating to Server Workloads, selecting your desired Server Workload, and copying the Service Endpoint Port.
    # Default: 443
    server-port: 443

```

### Outputs

The outputs available depend on the `credential-type` specified:

#### ApiKey
```yaml
outputs:
    # API key credential
    # Usage: ${{ steps.step-id.outputs.api-key }}
    api-key: '****'
```

#### UsernamePassword
```yaml
outputs:
    # Username credential
    # Usage: ${{ steps.step-id.outputs.username }}
    username: '****'

    # Password credential
    # Usage: ${{ steps.step-id.outputs.password }}
    password: '****'
```

#### OAuthToken
```yaml
outputs:
    # OAuth token credential
    # Usage: ${{ steps.step-id.outputs.token }}
    token: '****'
```

#### GoogleWorkloadIdentityFederation
```yaml
outputs:
    # Google Workload Identity Federation token
    # Usage: ${{ steps.step-id.outputs.token }}
    token: '****'
```

#### AwsStsFederation
```yaml
outputs:
    # AWS Access Key ID
    # Usage: ${{ steps.step-id.outputs.aws-access-key-id }}
    aws-access-key-id: '****'

    # AWS Secret Access Key
    # Usage: ${{ steps.step-id.outputs.aws-secret-access-key }}
    aws-secret-access-key: '****'

    # AWS Session Token
    # Usage: ${{ steps.step-id.outputs.aws-session-token }}
    aws-session-token: '****'
```

<b>Note:</b> All the outputs generated by this action are GitHub masked secrets.
